# Отчет о зависимостях проекта "Электронный журнал плавки"

## Основные зависимости (Production)

### GUI фреймворки
- **PySide6>=6.6.1**
  - Назначение: Создание desktop приложения с графическим интерфейсом
  - Используется в: `plavka.py`
  - Компоненты: QWidget, QApplication, QVBoxLayout, QLineEdit, QPushButton, QLabel и др.
  - Критичность: Высокая (основной интерфейс ввода данных)

- **streamlit**
  - Назначение: Создание web приложения для просмотра и анализа данных
  - Используется в: `streamlit_app.py`
  - Компоненты: st.set_page_config, st.title, st.dataframe, st.plotly_chart и др.
  - Критичность: Высокая (основной интерфейс просмотра данных)

### Обработка данных
- **pandas>=2.1.4**
  - Назначение: Обработка и анализ табличных данных
  - Используется в: `streamlit_app.py`, `migrate_excel_to_sqlite.py`
  - Операции: чтение Excel/SQL, фильтрация, преобразование данных
  - Критичность: Высокая (основная библиотека обработки данных)

### Визуализация данных
- **plotly**
  - Назначение: Создание интерактивных графиков и диаграмм
  - Используется в: `streamlit_app.py`
  - Компоненты: plotly.express для графиков
  - Критичность: Средняя (аналитические функции)

### Работа с Excel
- **openpyxl>=3.1.2**
  - Назначение: Чтение и запись Excel файлов (.xlsx)
  - Используется в: `plavka.py`, `streamlit_app.py`, `telegram_import.py`, `migrate_excel_to_sqlite.py`
  - Операции: создание, чтение, запись, модификация Excel файлов
  - Критичность: Высокая (основное хранилище данных)

- **xlsxwriter**
  - Назначение: Создание Excel файлов с расширенными возможностями
  - Используется в: `streamlit_app.py` (для экспорта)
  - Критичность: Средняя (альтернативный экспорт)

### Telegram интеграция
- **python-telegram-bot**
  - Назначение: API для работы с Telegram Bot
  - Используется в: `telegram_bot.py`, `telegram_import.py`
  - Компоненты: Update, Application, CommandHandler, MessageHandler
  - Критичность: Средняя (дополнительный канал ввода данных)

## Встроенные модули Python

### Стандартная библиотека
- **sqlite3** - Работа с SQLite базой данных (встроенный)
- **datetime** - Работа с датами и временем (встроенный)
- **re** - Регулярные выражения (встроенный)
- **os** - Работа с операционной системой (встроенный)
- **sys** - Системные параметры и функции (встроенный)
- **logging** - Логирование (встроенный)
- **shutil** - Операции с файлами и директориями (встроенный)
- **time** - Работа со временем (встроенный)
- **subprocess** - Запуск внешних процессов (встроенный)

## Зависимости для разработки (Development)

### Сборка и дистрибуция
- **pyinstaller**
  - Назначение: Создание автономных EXE файлов для Windows
  - Используется в: `build_exe.py`, `create_exe.bat`
  - Критичность: Средняя (для дистрибуции)

### Дополнительные инструменты
- **glob** - Поиск файлов по шаблону (встроенный)
- **io** - Работа с потоками ввода-вывода (встроенный)

## Требования к окружению

### Python версия
- **Минимальная**: Python 3.7
- **Рекомендуемая**: Python 3.8+ (для лучшей совместимости с PySide6)

### Системные требования
- **ОС**: Windows 7+ (основная платформа), Linux/macOS (поддерживается)
- **Память**: Минимально 512MB RAM, рекомендуется 1GB+
- **Диск**: ~100MB для приложения и данных
- **Сеть**: Не требуется (кроме Telegram бота)

## Анализ зависимостей

### Безопасность
- **Отсутствие уязвимых зависимостей**: Все используемые версии являются актуальными
- **Риск**: Токен Telegram бота хранится в коде (рекомендуется вынести в переменные окружения)

### Совместимость
- **PySide6**: Требует Qt6, может конфликтовать с PyQt5
- **python-telegram-bot**: Версии 20+ имеют асинхронный API (используется в проекте)
- **pandas**: Обратная совместимость хороша, но рекомендуется обновлять постепенно

### Производительность
- **pandas**: Эффективен для средних объемов данных (до 100K записей)
- **openpyxl**: Медленнее чем xlrd для чтения, но поддерживает запись
- **sqlite3**: Быстрый для локальных данных, но не для многопользовательского доступа

## Альтернативные зависимости

### GUI фреймворки
- **PyQt6**: Альтернатива PySide6 (более mature, но LGPL лицензия)
- **Tkinter**: Встроенный, но ограниченный функционал
- **Kivy**: Кроссплатформенный, но другой подход к дизайну

### Web фреймворки
- **Flask/Django**: Более гибкие, но требуют больше настройки
- **Dash**: Специализированный для аналитических приложений

### Работа с данными
- **polars**: Более быстрая альтернатива pandas
- **xlrd**: Только для чтения Excel, но быстрее

## Рекомендации по управлению зависимостями

### Краткосрочные улучшения
1. **Версионировать зависимости**: Указать точные версии в requirements.txt
2. **Добавить development requirements**: Разделить production и development зависимости
3. **Использовать virtual environment**: Изолировать зависимости проекта

### Среднесрочные улучшения
1. **Добавить dependency checking**: Автоматическая проверка уязвимостей
2. **Обновить pip-tools**: Для точного управления зависимостями
3. **Добавить requirements-dev.txt**: Для зависимостей разработки

### Долгосрочные улучшения
1. **Миграция на Poetry**: Современное управление зависимостями
2. **Docker контейнеризация**: Унификация окружения
3. **CI/CD интеграция**: Автоматическое тестирование зависимостей

## Текущие проблемы зависимости

1. **Отсутствие версионирования** в requirements.txt (только минимальные версии)
2. **Смешанные зависимости** в одном файле (production + development)
3. **Отсутствие lock файла** для воспроизводимости окружения
4. **Ручное управление** версиями без автоматизации

## Предлагаемый requirements.txt

### Production (requirements-prod.txt)
```
PySide6==6.6.1
streamlit==1.28.1
pandas==2.1.4
plotly==5.17.0
openpyxl==3.1.2
python-telegram-bot==20.6
xlsxwriter==3.1.9
```

### Development (requirements-dev.txt)
```
-r requirements-prod.txt
pyinstaller==6.1.0
black==23.10.1
flake8==6.1.0
pytest==7.4.3
pytest-cov==4.1.0
```

## Заключение

Проект использует современный стек зависимостей с хорошим балансом между функциональностью и простотой. Основные риски связаны с управлением версиями и безопасностью хранения токенов. Рекомендуется внедрить более строгий контроль зависимостей и разделить production/development окружения.